"use strict";(self.webpackChunkimg_net=self.webpackChunkimg_net||[]).push([[893],{5893:function(e,r,n){n.r(r),n.d(r,{default:function(){return _}});var t,i,s,l,c=n(168),d=n(2791),u=n(9023),a=n(4382),o=n(1413),h=n(32),g=n(9553),x=n(3775),p=n(7083),f=n(6776),j=n(6031),b=n(184),m=g.Z.Dragger,Z=j.ZP.div(t||(t=(0,c.Z)(["\n  margin-top: 30px;\n  border: 1px dashed #ccc;\n  padding: 20px;\n"]))),v=j.ZP.p(i||(i=(0,c.Z)(["\n  margin: 20px 0;\n  text-align: center;\n  font-weight: bold;\n"]))),w=j.ZP.img(s||(s=(0,c.Z)(["\nmax-width: 300px;\n"]))),P=j.ZP.button(l||(l=(0,c.Z)(["\n  margin-left: 10px;\n  padding: 0;\n\n  color: grey;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n"])));x.ZP.config({top:100});var S,F,U=(0,u.Pi)((function(){var e=(0,a.m)(),r=e.ImageStore,n=e.UserStore,t=(0,d.useRef)(),i=(0,d.useRef)(),s=(0,h.fv)((function(){return{width:null,setWidth:function(e){s.width=e},get widthStr(){return s.width?"/w/".concat(s.width):""},heith:null,setHeight:function(e){s.height=e},get heightStr(){return s.height?"/h/".concat(s.height):""},get fullStr(){return r.serverFile.attributes.url.attributes.url+"?imageView2/0"+s.widthStr+s.heightStr}}})),l={showUploadList:!1,beforeUpload:function(e){return r.setFile(e),r.setFilename(e.name),null===n.currentUser?(x.ZP.error("\u8bf7\u5148\u767b\u5f55\u5728\u4e0a\u4f20\uff01"),!1):(window.file=e,/(svg$)|(png$)|(jpg$)|(jpeg$)|(gif$)/gi.test(e.type)?e.size>5242880?(x.ZP.error("\u56fe\u7247\u6700\u59275M"),!1):(r.upload().then((function(e){console.log(e),console.log("\u4e0a\u4f20\u6210\u529f")})).catch((function(){console.log("\u4e0a\u4f20\u5931\u8d25")})),!1):(x.ZP.error("\u53ea\u80fd\u4e0a\u4f20 png / svg / jpg / gif \u683c\u5f0f\u7684\u56fe\u7247"),!1))}};return(0,b.jsxs)("div",{children:[(0,b.jsx)(p.Z,{tip:"\u4e0a\u4f20\u4e2d",spinning:r.isUploading,children:(0,b.jsxs)(m,(0,o.Z)((0,o.Z)({},l),{},{children:[(0,b.jsx)("p",{className:"ant-upload-drag-icon",children:(0,b.jsx)(f.Z,{})}),(0,b.jsx)("p",{className:"ant-upload-text",children:"\u70b9\u51fb\u6216\u8005\u62d6\u62fd\u4e0a\u4f20\u56fe\u7247"}),(0,b.jsx)("p",{className:"ant-upload-hint",children:"\u4ec5\u652f\u6301\u4e0a\u4f20 .png / .svg / .jpg / .gif \u683c\u5f0f\u7684\u56fe\u7247\uff1b\u56fe\u7247\u6700\u5927\u5c3a\u5bf8 5M"})]}))}),r.serverFile&&n.currentUser?(0,b.jsxs)(Z,{children:[(0,b.jsx)(v,{children:"\u4e0a\u4f20\u7ed3\u679c\uff1a"}),(0,b.jsxs)("dl",{children:[(0,b.jsx)("dt",{children:"\u6587\u4ef6\u540d"}),(0,b.jsx)("dd",{children:r.filename}),(0,b.jsx)("dt",{children:"\u56fe\u7247\u9884\u89c8"}),(0,b.jsx)("dd",{children:(0,b.jsx)(w,{src:r.serverFile.attributes.url.attributes.url})}),(0,b.jsx)("dt",{children:"\u7ebf\u4e0a\u5730\u5740"}),(0,b.jsxs)("dd",{children:[(0,b.jsx)("a",{target:"_blank",href:r.serverFile.attributes.url.attributes.url,children:r.serverFile.attributes.url.attributes.url}),(0,b.jsx)(P,{onClick:function(){navigator.clipboard.writeText("".concat(r.serverFile.attributes.url.attributes.url)),x.ZP.success("\u590d\u5236\u6210\u529f")},children:" \u70b9\u51fb\u590d\u5236 "})]}),(0,b.jsx)("dt",{children:"\u66f4\u591a\u5c3a\u5bf8"}),(0,b.jsxs)("dd",{children:[(0,b.jsx)("input",{ref:t,onChange:function(){s.setWidth(t.current.value)},placeholder:"\u6700\u5927\u5bbd\u5ea6\uff08\u53ef\u9009\uff09"}),"\xa0",(0,b.jsx)("input",{ref:i,onChange:function(){s.setHeight(i.current.value)},placeholder:"\u6700\u5927\u9ad8\u5ea6\uff08\u53ef\u9009\uff09"})]}),(0,b.jsxs)("dd",{children:[(0,b.jsx)("a",{target:"_blank",href:s.fullStr,children:s.fullStr}),(0,b.jsx)(P,{onClick:function(){navigator.clipboard.writeText("".concat(s.fullStr)),x.ZP.success("\u590d\u5236\u6210\u529f")},children:" \u70b9\u51fb\u590d\u5236 "})]})]})]}):null]})})),k=j.ZP.div(S||(S=(0,c.Z)(["\n  background: orange;\n  padding: 10px;\n  margin: 126px 0;\n  color: #fff;\n  border-radius: 4px;\n"]))),C=(0,u.Pi)((function(e){var r=e.children,n=(0,a.m)().UserStore;return(0,b.jsx)(b.Fragment,{children:n.currentUser?null:(0,b.jsx)(k,{children:r})})})),$=j.ZP.p(F||(F=(0,c.Z)(["\n  font-size: 18px;\n  margin: 50px 0;\n"]))),_=(0,u.Pi)((function(){var e=(0,a.m)().UserStore;return(0,b.jsxs)(b.Fragment,{children:[e.currentUser?(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)($,{children:["\u4f60\u597d\uff0c",e.currentUser.attributes.username," !"]})}):null,(0,b.jsx)(C,{children:"\u8bf7\u5148\u767b\u5f55\u518d\u4e0a\u4f20\uff01"}),(0,b.jsx)(U,{})]})}))}}]);
//# sourceMappingURL=893.62aba89d.chunk.js.map