{"version":3,"file":"static/js/893.62aba89d.chunk.js","mappings":"oRAOQA,EAAYC,EAAAA,EAAAA,QAEdC,EAASC,EAAAA,GAAAA,IAAH,2FAKNC,EAAID,EAAAA,GAAAA,EAAH,wFAKDE,EAAQF,EAAAA,GAAAA,IAAH,2CAGLG,EAASH,EAAAA,GAAAA,OAAH,2IAUZI,EAAAA,GAAAA,OAAe,CACbC,IAAK,MAGP,I,IAsHA,GAtHkBC,EAAAA,EAAAA,KAAS,WACzB,OAAkCC,EAAAA,EAAAA,KAA1BC,EAAR,EAAQA,WAAYC,EAApB,EAAoBA,UACdC,GAAOC,EAAAA,EAAAA,UACPC,GAAOD,EAAAA,EAAAA,UAEPE,GAAQC,EAAAA,EAAAA,KAAmB,iBAAO,CACtCC,MAAO,KACPC,SAFsC,SAE7BD,GACPF,EAAME,MAAQA,GAEZE,eACF,OAAOJ,EAAME,MAAN,aAAoBF,EAAME,OAAU,IAE7CG,MAAO,KACPC,UATsC,SAS5BC,GACRP,EAAMO,OAASA,GAEbC,gBACF,OAAOR,EAAMO,OAAN,aAAqBP,EAAMO,QAAW,IAE3CE,cAEF,OAAOd,EAAWe,WAAWC,WAAWC,IAAID,WAAWC,IAAM,gBAAkBZ,EAAMI,SAAWJ,EAAMQ,eAqBpGK,EAAQ,CACZC,gBAAgB,EAChBC,aAAc,SAAAC,GAGZ,OAFArB,EAAWsB,QAAQD,GACnBrB,EAAWuB,YAAYF,EAAKG,MACE,OAA1BvB,EAAUwB,aACZ7B,EAAAA,GAAAA,MAAc,qDACP,IAET8B,OAAOL,KAAOA,EACT,wCAAwCM,KAAKN,EAAKO,MAInDP,EAAKQ,KAAO,SACdjC,EAAAA,GAAAA,MAAc,+BACP,IAETI,EAAW8B,SACRC,MAAK,SAAAhB,GACJiB,QAAQC,IAAIlB,GACZiB,QAAQC,IAAI,+BAEbC,OAAM,WACLF,QAAQC,IAAI,gCAET,IAfLrC,EAAAA,GAAAA,MAAc,kFACP,MAkBb,OACE,4BACE,SAAC,IAAD,CAAMuC,IAAI,qBAAMC,SAAUpC,EAAWqC,YAArC,UACE,UAAChD,GAAD,kBAAa6B,GAAb,eACE,cAAGoB,UAAU,uBAAb,UACE,SAACC,EAAA,EAAD,OAEF,cAAGD,UAAU,kBAAb,2EACA,cAAGA,UAAU,kBAAb,wJAMFtC,EAAWe,YAAYd,EAAUwB,aAAc,UAAClC,EAAD,YAC7C,SAACE,EAAD,8CACA,2BACE,gDACA,wBAAKO,EAAWwC,YAChB,sDACA,yBACE,SAAC9C,EAAD,CAAO+C,IAAKzC,EAAWe,WAAWC,WAAWC,IAAID,WAAWC,SAE9D,sDAGA,2BAAI,cAAGyB,OAAO,SAASC,KAAM3C,EAAWe,WAAWC,WAAWC,IAAID,WAAWC,IAAzE,SAA+EjB,EAAWe,WAAWC,WAAWC,IAAID,WAAWC,OAAQ,SAACtB,EAAD,CAAQiD,QAjExI,WACnBC,UAAUC,UAAUC,UAApB,UAAiC/C,EAAWe,WAAWC,WAAWC,IAAID,WAAWC,MACjFrB,EAAAA,GAAAA,QAAgB,6BA+DmI,4CAE3I,sDAGA,2BACE,kBAAOoD,IAAK9C,EAAM+C,SA/EN,WACtB5C,EAAMG,SAASN,EAAKgD,QAAQC,QA8E2BC,YAAY,qDAD3D,QAEE,kBAAOJ,IAAK5C,EAAM6C,SA5EL,WACvB5C,EAAMM,UAAUP,EAAK8C,QAAQC,QA2E2BC,YAAY,yDAE5D,2BACE,cAAGV,OAAO,SAASC,KAAMtC,EAAMS,QAA/B,SAAyCT,EAAMS,WAAY,SAACnB,EAAD,CAAQiD,QAvE1D,WACnBC,UAAUC,UAAUC,UAApB,UAAiC1C,EAAMS,UACvClB,EAAAA,GAAAA,QAAgB,6BAqEqD,iDAGrD,WC/IdyD,EAAO7D,EAAAA,GAAAA,IAAH,4HAmBV,GAXkBM,EAAAA,EAAAA,KAAU,YAAiB,IAAfwD,EAAc,EAAdA,SACpBrD,GAAcF,EAAAA,EAAAA,KAAdE,UACR,OACE,8BAEIA,EAAUwB,YAAc,MAAO,SAAC4B,EAAD,UAAOC,SCXxC7D,EAAID,EAAAA,GAAAA,EAAH,+DAqBP,GAhBaM,EAAAA,EAAAA,KAAS,WACpB,IAAQG,GAAcF,EAAAA,EAAAA,KAAdE,UAER,OACE,gCAEIA,EAAUwB,aAAc,+BACtB,UAAC,EAAD,gCAAQxB,EAAUwB,YAAYT,WAAWuC,SAAzC,UACI,MAER,SAAC,EAAD,gEACA,SAACC,EAAD","sources":["components/Uploader.js","components/Tips.js","pages/Home.js"],"sourcesContent":["import React, { useRef } from 'react'\r\nimport { useStores } from '../stores'\r\nimport { observer, useLocalObservable } from 'mobx-react'\r\nimport { Upload, message, Spin } from 'antd'\r\nimport { InboxOutlined } from '@ant-design/icons';\r\nimport styled from 'styled-components'\r\n\r\nconst { Dragger } = Upload\r\n\r\nconst Result = styled.div`\r\n  margin-top: 30px;\r\n  border: 1px dashed #ccc;\r\n  padding: 20px;\r\n`\r\nconst P = styled.p`\r\n  margin: 20px 0;\r\n  text-align: center;\r\n  font-weight: bold;\r\n`\r\nconst Image = styled.img`\r\nmax-width: 300px;\r\n`\r\nconst Button = styled.button`\r\n  margin-left: 10px;\r\n  padding: 0;\r\n\r\n  color: grey;\r\n  border: none;\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n`\r\n\r\nmessage.config({\r\n  top: 100\r\n})\r\n\r\nconst Component = observer(() => {\r\n  const { ImageStore, UserStore } = useStores()\r\n  const ref1 = useRef()\r\n  const ref2 = useRef()\r\n\r\n  const store = useLocalObservable(() => ({\r\n    width: null,\r\n    setWidth(width) {\r\n      store.width = width\r\n    },\r\n    get widthStr() {\r\n      return store.width ? `/w/${store.width}` : ''\r\n    },\r\n    heith: null,\r\n    setHeight(height) {\r\n      store.height = height\r\n    },\r\n    get heightStr() {\r\n      return store.height ? `/h/${store.height}` : ''\r\n    },\r\n    get fullStr() {\r\n      // ?imageView2/0/w/800/h/400\r\n      return ImageStore.serverFile.attributes.url.attributes.url + '?imageView2/0' + store.widthStr + store.heightStr\r\n    }\r\n  }))\r\n\r\n  const bindWidthChange = () => {\r\n    store.setWidth(ref1.current.value)\r\n  }\r\n\r\n  const bindHeightchange = () => {\r\n    store.setHeight(ref2.current.value)\r\n  }\r\n\r\n  const bindOnClick1 = () => {\r\n    navigator.clipboard.writeText(`${ImageStore.serverFile.attributes.url.attributes.url}`)\r\n    message.success('复制成功')\r\n  }\r\n  const bindOnClick2 = () => {\r\n    navigator.clipboard.writeText(`${store.fullStr}`)\r\n    message.success('复制成功')\r\n  }\r\n\r\n  const props = {\r\n    showUploadList: false,\r\n    beforeUpload: file => {\r\n      ImageStore.setFile(file)\r\n      ImageStore.setFilename(file.name)\r\n      if (UserStore.currentUser === null) {\r\n        message.error('请先登录在上传！')\r\n        return false\r\n      }\r\n      window.file = file\r\n      if (!/(svg$)|(png$)|(jpg$)|(jpeg$)|(gif$)/ig.test(file.type)) {\r\n        message.error('只能上传 png / svg / jpg / gif 格式的图片')\r\n        return false\r\n      }\r\n      if (file.size > 5 * 1024 * 1024) {\r\n        message.error('图片最大5M')\r\n        return false\r\n      }\r\n      ImageStore.upload()\r\n        .then(serverFile => {\r\n          console.log(serverFile)\r\n          console.log('上传成功')\r\n        })\r\n        .catch(() => {\r\n          console.log('上传失败')\r\n        })\r\n      return false\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Spin tip=\"上传中\" spinning={ImageStore.isUploading}>\r\n        <Dragger {...props}>\r\n          <p className=\"ant-upload-drag-icon\">\r\n            <InboxOutlined />\r\n          </p>\r\n          <p className=\"ant-upload-text\">点击或者拖拽上传图片</p>\r\n          <p className=\"ant-upload-hint\">\r\n            仅支持上传 .png / .svg / .jpg / .gif 格式的图片；图片最大尺寸 5M\r\n          </p>\r\n        </Dragger>\r\n      </Spin>\r\n      {\r\n        ImageStore.serverFile&&UserStore.currentUser ? <Result>\r\n          <P>上传结果：</P>\r\n          <dl>\r\n            <dt>文件名</dt>\r\n            <dd>{ImageStore.filename}</dd>\r\n            <dt>图片预览</dt>\r\n            <dd>\r\n              <Image src={ImageStore.serverFile.attributes.url.attributes.url} />\r\n            </dd>\r\n            <dt>\r\n              线上地址\r\n            </dt>\r\n            <dd><a target=\"_blank\" href={ImageStore.serverFile.attributes.url.attributes.url}>{ImageStore.serverFile.attributes.url.attributes.url}</a><Button onClick={bindOnClick1}> 点击复制 </Button></dd>\r\n\r\n            <dt>\r\n              更多尺寸\r\n            </dt>\r\n            <dd>\r\n              <input ref={ref1} onChange={bindWidthChange} placeholder=\"最大宽度（可选）\" />&nbsp;\r\n              <input ref={ref2} onChange={bindHeightchange} placeholder=\"最大高度（可选）\" />\r\n            </dd>\r\n            <dd>\r\n              <a target=\"_blank\" href={store.fullStr}>{store.fullStr}</a><Button onClick={bindOnClick2}> 点击复制 </Button>\r\n            </dd>\r\n          </dl>\r\n        </Result> : null\r\n      }\r\n    </div>\r\n  )\r\n})\r\n\r\nexport default Component ","import React from 'react'\r\nimport { useStores } from '../stores'\r\nimport { observer } from 'mobx-react'\r\nimport styled from 'styled-components'\r\n\r\nconst Tips = styled.div`\r\n  background: orange;\r\n  padding: 10px;\r\n  margin: 126px 0;\r\n  color: #fff;\r\n  border-radius: 4px;\r\n`\r\n\r\nconst Component = observer (({children}) => {\r\n  const { UserStore } = useStores()\r\n  return (\r\n    <>\r\n      {\r\n        UserStore.currentUser ? null : <Tips>{children}</Tips>\r\n      }\r\n    </>\r\n  )\r\n})\r\n\r\nexport default Component","import React from 'react'\r\nimport { observer } from 'mobx-react'\r\nimport { useStores } from '../stores'\r\nimport Uploader from '../components/Uploader'\r\nimport Tips from '../components/Tips'\r\nimport styled from 'styled-components'\r\n\r\nconst P = styled.p`\r\n  font-size: 18px;\r\n  margin: 50px 0;\r\n`\r\n\r\nconst Home = observer(() => {\r\n  const { UserStore } = useStores()\r\n\r\n  return (\r\n    <>\r\n      {\r\n        UserStore.currentUser ? <>\r\n          <P>你好，{ UserStore.currentUser.attributes.username } !</P>\r\n        </> : null\r\n      }\r\n      <Tips>请先登录再上传！</Tips>\r\n      <Uploader />\r\n    </>\r\n  )\r\n})\r\n\r\nexport default Home"],"names":["Dragger","Upload","Result","styled","P","Image","Button","message","top","observer","useStores","ImageStore","UserStore","ref1","useRef","ref2","store","useLocalObservable","width","setWidth","widthStr","heith","setHeight","height","heightStr","fullStr","serverFile","attributes","url","props","showUploadList","beforeUpload","file","setFile","setFilename","name","currentUser","window","test","type","size","upload","then","console","log","catch","tip","spinning","isUploading","className","InboxOutlined","filename","src","target","href","onClick","navigator","clipboard","writeText","ref","onChange","current","value","placeholder","Tips","children","username","Uploader"],"sourceRoot":""}