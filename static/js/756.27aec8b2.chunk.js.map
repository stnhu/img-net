{"version":3,"file":"static/js/756.27aec8b2.chunk.js","mappings":"4MAMMA,EAAUC,EAAAA,GAAAA,IAAH,8JAQPC,EAAOD,EAAAA,GAAAA,IAAF,oJA6HX,UArHkB,WAEhB,IAAQE,GAAcC,EAAAA,EAAAA,KAAdD,UACFE,GAAWC,EAAAA,EAAAA,MAmCjB,OACE,UAACN,EAAD,YACE,UAACE,EAAD,YACE,yCACA,iBAAMK,MAAO,CAACC,WAAY,OAA1B,8BAEF,UAAC,IAAD,CACEC,KAAK,QACLC,SAAU,CACRC,KAAM,GAERC,WAAY,CACVD,KAAK,IAEPE,SA/CW,SAAAC,GAEfX,EAAUY,YAAYD,EAAOE,UAC7Bb,EAAUc,YAAYH,EAAOI,UAC7Bf,EAAUgB,WACPC,MAAK,WACJf,EAAS,QAEVgB,OAAM,SAAAC,GACLC,QAAQC,IAAIF,GACZG,MAAM,4FAsCNC,eAlCiB,SAAAC,GACrBJ,QAAQC,IAAI,UAAWG,IAkCnBC,aAAa,MAVf,WAYE,SAAC,SAAD,CACEC,MAAM,qBACNpB,KAAK,WACLqB,MAAO,CACL,CAAEC,UAAU,EAAMC,QAAS,8CAC3B,CAAEC,UAtCa,SAACC,EAAGC,GAC3B,MAAG,KAAKC,KAAKD,GAAeE,QAAQC,OAAO,0GACxCH,EAAMI,OAAS,GAAKJ,EAAMI,OAAS,GAAWF,QAAQC,OAAO,8DACzDD,QAAQG,aA8BX,UAQE,SAAC,IAAD,OAGF,SAAC,SAAD,CACEX,MAAM,eACNpB,KAAK,WACLqB,MAAO,CACL,CACEC,UAAU,EACVC,QAAS,wCAEX,CACES,IAAK,EACLT,QAAS,mCAEX,CACEU,IAAK,GACLV,QAAS,qCAdf,UAkBE,SAAC,aAAD,OAGF,SAAC,SAAD,CACEH,MAAM,2BACNpB,KAAK,kBACLqB,MAAO,CACL,CACEC,UAAU,EACVC,QAAS,wCAjEG,SAAC,GAAD,IAAGW,EAAH,EAAGA,cAAH,MAAwB,CAC9CV,UAD8C,SACpCC,EAAGC,GACX,OAAIA,GAASQ,EAAc,cAAgBR,EAGpCE,QAAQC,OAAO,8CAFbD,QAAQG,cAwDf,UAWE,SAAC,aAAD,OAGF,SAAC,SAAD,CACE5B,WAAY,CACVgC,OAAQ,EACRjC,KAAM,IAHV,UAME,SAAC,IAAD,CAAQkC,KAAK,UAAUC,SAAS,SAAhC","sources":["pages/Register.js"],"sourcesContent":["import React from 'react'\r\nimport { Form, Input, Button } from 'antd'\r\nimport styled from 'styled-components'\r\nimport { useStores } from '../stores'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nconst Wrapper = styled.div`\r\n  max-width: 600px;\r\n  margin: 150px auto;\r\n  box-shadow: 2px 2px 4px 0 rgba(0, 0, 0, 0.2);\r\n  border-radius: 4px;\r\n  padding: 20px;\r\n`\r\n\r\nconst Title =styled.div`\r\n  font-weight: 200;\r\n  font-size: 18px;\r\n  margin-bottom: 30px;\r\n  padding-bottom: 5px; \r\n  border-bottom: 1px solid #eee;\r\n`\r\n\r\nconst Component = () => {\r\n\r\n  const { AuthStore } = useStores()\r\n  const navigate = useNavigate()\r\n\r\n  const onFinish = values => {\r\n    // console.log('Success:', values)\r\n    AuthStore.setUsername(values.username)\r\n    AuthStore.setPassword(values.password)\r\n    AuthStore.register()\r\n      .then(() => {\r\n        navigate('/')\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n        alert('注册失败！用户名已经被占用。')\r\n      })\r\n  }\r\n\r\n  const onFinishFailed = errorInfo => {\r\n    console.log('Failed:', errorInfo)\r\n  }\r\n\r\n  const validateUsername = (_, value) => {\r\n    if(/\\W/.test(value)) return Promise.reject('不能出现字母数字下划线以外的的字符')\r\n    if(value.length < 4 || value.length > 10) return Promise.reject('用户名长度为4\\~10个字符')\r\n    return Promise.resolve()\r\n  }\r\n\r\n  const confirmPassword = ({ getFieldValue }) => ({\r\n    validator(_, value) {\r\n      if(!value || getFieldValue('password') === value) {\r\n        return Promise.resolve()\r\n      }\r\n      return Promise.reject('两次密码不匹配')\r\n    }\r\n  })\r\n\r\n  return (\r\n    <Wrapper>\r\n      <Title>\r\n        <span>Img-Net &gt;</span>\r\n        <span style={{fontWeight: '300'}}>注册</span>\r\n      </Title>\r\n      <Form\r\n        name=\"basic\"\r\n        labelCol={{\r\n          span: 6,\r\n        }}\r\n        wrapperCol={{\r\n          span:12,\r\n        }}\r\n        onFinish={onFinish}\r\n        onFinishFailed={onFinishFailed}\r\n        autoComplete=\"off\"\r\n      >\r\n        <Form.Item\r\n          label=\"用户名\"\r\n          name=\"username\"\r\n          rules={[\r\n            { required: true, message: '请输入用户名！'},\r\n            { validator: validateUsername }\r\n          ]}\r\n        >\r\n          <Input />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"密码\"\r\n          name=\"password\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: '请输入密码！',\r\n            },\r\n            {\r\n              min: 4,\r\n              message: '最少4个字符'\r\n            },\r\n            {\r\n              max: 10,\r\n              message: '最大10个字符'\r\n            }        \r\n          ]}\r\n        >\r\n          <Input.Password />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          label=\"确认密码\"\r\n          name=\"comfirmPassword\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: '请确认密码！',\r\n            },\r\n            confirmPassword\r\n          ]}\r\n        >\r\n          <Input.Password />\r\n        </Form.Item>\r\n\r\n        <Form.Item\r\n          wrapperCol={{\r\n            offset: 6,\r\n            span: 16,\r\n          }}\r\n        >\r\n          <Button type=\"primary\" htmlType=\"submit\">\r\n            提交\r\n          </Button>\r\n        </Form.Item>\r\n      </Form>\r\n    </Wrapper>\r\n  )\r\n}\r\n\r\nexport default Component"],"names":["Wrapper","styled","Title","AuthStore","useStores","navigate","useNavigate","style","fontWeight","name","labelCol","span","wrapperCol","onFinish","values","setUsername","username","setPassword","password","register","then","catch","err","console","log","alert","onFinishFailed","errorInfo","autoComplete","label","rules","required","message","validator","_","value","test","Promise","reject","length","resolve","min","max","getFieldValue","offset","type","htmlType"],"sourceRoot":""}